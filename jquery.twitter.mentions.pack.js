(function(f){f.fn.twitterMentions=function(a,b){try{var d=f.extend({},f.fn.twitterMentions.defaults,b),c=f.isFunction(d.callback)?d.callback:g,url='http://search.twitter.com/search.json'params={q:h(a),page:d.page,rpp:d.maximum};return this.each(function(i,e){f.ajax({url:url,data:params,dataType:'jsonp',success:function(o){c.apply(this,[(o.results)?o.results:o,e,d])}})})}catch(e){}};f.fn.twitterMentions.defaults={user:null,callback:null,page:1,maximum:10,avatar:true,ulClass:'twitter-mentions',odd:true,oddClass:'odd'};var g=function(b,c,d){var e='<ul class="'+d.ulClass+'">';for(var i=0;i<b.length;i++){current=b[i];user=current.from_user;text=current.text.replace(/(https?:\/\/[-_.!~*\'()a-zA-Z0-9;\/?:\@&=+\$,%#]+)/,function(u){var a=(u.length>30)?u.substr(0,30)+'...':u;return'<a href="'+u+'">'+a+'</a>'}).replace(/@([a-zA-Z0-9_]+)/g,'@<a href="http://twitter.com/$1">$1</a>').replace(/(?:^|\s)#([^\s\.\+:!]+)/g,function(a,u){return' <a href="http://twitter.com/search?q='+encodeURIComponent(u)+'">#'+u+'</a>'});e+='<li'+((d.odd&&i%2)?' class="'+d.oddClass+'"':'')+'>'+(d.avatar?'<a href="http://twitter.com/'+user+'"><img src="'+current.profile_image_url+'"></a>':'')+'<strong>'+user+'</strong> '+text+'</li>'}e+='</ul>';$(c).html(e)};var h=function(q){if(typeof q=='string')return'@'+q;else if(typeof q=='object')return'@'+q.join(' OR @');throw'data type not supported';}})(jQuery);
